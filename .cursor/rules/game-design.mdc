---
description: 
globs: 
alwaysApply: false
---
游戏设计文档：仿蛊 (Fang Gu)

核心理念
仿蛊是一款结合了《星露谷物语》农场经营与《吸血鬼幸存者》动作战斗的2D角色扮演游戏。核心机制围绕收集和操控名为"蛊"的寄生生物展开，玩家将通过蛊术进行战斗、强化能力并与游戏世界互动。

核心玩法循环
探索与战斗：玩家在网格化地图中导航，使用基础攻击和复杂的蛊术系统进行实时战斗。
升级与突破：击败敌人获得EXP。积累足够EXP后，玩家必须完成"突破挑战"来提升等级。
家园经营：玩家返回家园基地进行耕种、管理资源并为下次远征做准备。
获取与强化：玩家可以找到新蛊虫、物品和装备来增强实力并自定义玩法风格。

关键特性

3.1 世界与探索
地图系统：世界由多个网格化地图组成，类似《星露谷物语》。
旅行：玩家可以使用传送点在各地图间移动。
镜头：固定俯视角，模仿《星露谷物语》风格。

3.2 玩家角色
属性：
HP(生命值)：玩家的生命力。归零即失败。
MP(法力/魔法值)：使用某些蛊术能力的资源。
EXP(经验值)：通过战斗和其他活动获得。用于升级。
LEVEL：角色整体实力等级。
突破系统：要提升LEVEL，玩家必须完成特殊挑战。失败会导致当前EXP损失10%。某些物品可能暂时锁定突破尝试。
AD(攻击伤害)：决定物理攻击强度。
AP(能力强度)：决定魔法/蛊术攻击强度。
防御：减少受到的伤害。
天赋：游戏开始时分配的永久角色特性，从D到A(丁，丙，乙，甲)。初始天赋影响EXP获取率和突破挑战难度。可通过特殊物品升级。
魂力：核心角色资源，可能用于高级蛊术或其他特殊系统。

玩家操作：
移动：标准四方向移动(上，下，左，右)。
互动：'F'键。
基础攻击：'H'键。伤害随AD提升。攻击范围和速度可通过装备调整。

3.3 "蛊"系统
核心战斗和功能系统。蛊是玩家装备和指挥的生物体。

蛊分类：
主动蛊：需要玩家手动激活。
伤害型：攻击型蛊，伤害随玩家AD和AP提升。
防御型：提供护盾、增益等的防护型蛊。
功能型：改变玩家状态(如移动速度、HP恢复)或提供其他非战斗效果的蛊。
被动蛊：无需激活即可提供持续效果。

蛊召唤方法：
多步骤、技巧性施法系统：
选择类型：按'J'进入施法模式。然后按'I'选择伤害蛊，'K'选择防御蛊，','选择功能蛊。
分配代码：游戏立即为所选类型的每个装备蛊分配唯一3字母随机字符串。
伤害蛊代码：由'I','O','P'组成。
防御蛊代码：由'K','L',';'组成。
功能蛊代码：由',','.','/'组成。
瞄准与准备：玩家必须输入与目标蛊对应的3字母代码。这将使蛊进入"准备"状态。
施放：再次按'J'释放蛊效果。
取消：玩家在最终施放前随时可按'C'取消序列。

示例蛊：
老树盘根蛊：施放后，玩家进入"树灵状态"，AD、MP和防御大幅提升，但无法移动。按'C'可解除状态，但会使玩家获得30秒50%减速减益。
强夺蛊：
激活时，所有携带蛊的单位上方会出现4字母字符串。玩家必须输入目标字符串来施加强夺效果。
进入强夺阶段，持续一段时间（通过玩家与选中单位的属性计算出一个持续时间），
持续时间过后则成功强夺，从目标身上抽取一个蛊虫成为玩家的蛊虫，蛊虫等级越高概率越低。

在激活强夺蛊，所有除退出抢夺蛊的操作都被禁止，退出键为C
期间如果玩家受到攻击，玩家会受到1.5倍伤害，且会取消激活。



3.4 家园系统
玩家家园：独立的实例化地图。
种植：
玩家放置"元气桩"来净化周围土地，使其可耕种。
元气桩影响范围是以桩为中心的正方形。通过升级元气桩可以扩大这个正方形范围(N x N)。
耕种机制类似《星露谷物语》。

3.5 用户界面(UI)
角色面板：显示所有当前角色属性(HP,MP,AD等)。
蛊面板：显示所有拥有的蛊。鼠标悬停显示详细描述和能力。
设置面板：游戏选项。
背包面板：(计划中)。


选项C：混合系统(自动保存+手动)
保存数据：
角色数据：等级，EXP，所有属性(HP,MP等)，当前状态效果。
物品/装备：背包中所有物品，所有装备物品，所有拥有的蛊。
世界状态：玩家家园状态(升级，种植作物)，关键NPC位置。
任务进度：活跃和已完成任务ID列表。
玩家位置：保存时所在的地图ID和坐标。


未来/计划系统(正式版后)
NPC系统：具有与玩家相似属性的NPC。
奴役系统：捕获单位并分配他们在家园中工作的系统。
塔防系统：防御家园免受入侵的系统，可能由低声望触发。

攻城系统：用于攻击或防守据点的大规模系统。